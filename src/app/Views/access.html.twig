{% extends "base.html.twig" %}
{% block title %}
    Web Setup
{% endblock title %}
{% block content %}
    <article class="content" style="width: 70%;">
        <p><img src="/assets/img/crest.png"></p>
        <h3><strong>Edgebox Web Setup - Internet Access</strong></h3>
        <p><b>Status:</b> {{ status }} {% if not show_form %}<a href="/setup/access/logout">(Logout)</a>{% endif %}</p>
        {% if show_form %}
            <br>
            <p>
                To provide access to your EdgeApps through the internet, you need to <b>login using your <a target="_blank" href="https://edgebox.io">Edgebox.io</a> Account</b>.
                <br>
                You will then be able to choose which EdgeApps you want accessible outside your home network.
                <br>
            <form action="" method="POST">
                <div>
                    <label for="username">Username:</label>
                    <input type="text" name="username" id="edgeboxio-username">
                </div>
                <div>
                    <label for="password">Password: </label>
                    <input type="password" name="password" id="edgeboxio-password">
                </div>
                <div>
                    <button>Login & Setup</button>
                </div>
            </form>

            </p>
        {% else %}
            <p><b>Connection status:</b> {{ connection_status }}</p>
            <p><b>Connection details:</b>
            <ul id="connection-details">
                {% for key,item in connection_details %}
                    <li>{{ key }}: {{ item }}</li>
                {% endfor %}
            </ul>
            </p>
            {% if task_status < 2 %}
                <a href="/setup/access"><button>Re-Check Status</button></a>
            {% endif %}
        {% endif %}

        <a href="/setup"><button>Go Back</button></a>

    </article>
{% endblock content %}
